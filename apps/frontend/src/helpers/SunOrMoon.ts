export default function isSun(){
    const date1 = new Date();
    const yearStart = new Date(date1.getFullYear(), 0, 1);
    const daylight = (yearStart.getTimezoneOffset() - date1.getTimezoneOffset());
    var day = Math.floor((date1.valueOf() - yearStart.valueOf() + daylight * 60000) / 86400000);
    var minute = (date1.getHours() * 60 + date1.getMinutes() - daylight + date1.getSeconds() / 60);

    const bull = [0, 10, 31, 59, 90, 120, 151, 166, 181, 212, 243, 273, 304, 334, 355, 365];
    const darryl = [0, 10, 31, 59, 90, 120, 151, 175, 181, 212, 243, 273, 304, 334, 344, 365];
    const BULL = [487.000000000000000, -0.204071196009092, 0.0, -0.000959288039909, 484.000000000000000, -0.491857607981816, -0.028778641197272, 0.000218161163548, 463.000000000000000, -1.411933318893649, -0.015034487893767, 0.000105738494795, 414.000000000000000, -2.005167701187218, -0.006152454331003, 0.000103142135172, 349.000000000000000, -2.089261094009632, 0.003439764239957, 0.000058594259420, 291.000000000000000, -1.724670739179459, 0.008713247587715, 0.000170902688153, 251.000000000000000, -0.691736938795729, 0.024607197585954, -0.000047574925897, 246.000000000000000, 0.014365913802152, 0.022466325920572, -0.000080122085677, 251.000000000000000, 0.634273283587120, 0.018860832065093, -0.000160710664488, 284.000000000000000, 1.340316025904658, 0.003914740267731, -0.000044035520806, 328.000000000000000, 1.456075516020052, -0.000180563167234, 0.000017786717404, 372.000000000000000, 1.493265862976930, 0.001420241399130, 0.000011543965062, 420.000000000000000, 1.614602080995678, 0.002493830149862, -0.000173426280176, 466.000000000000000, 1.295980933512798, -0.013114535065958, -0.000262616309219, 485.000000000000000, 0.397729083645226, -0.029659362546784, 0.000988645418226];
    const DARRYL = [984.000000000000000, 1.150970164130016, 0.0, 0.000490298358700, 996.000000000000000, 1.298059671739969, 0.014708950760995, -0.000188521800252, 1028.000000000000000, 1.666421261967731, 0.002832077345089, -0.000085647957983, 1075.000000000000000, 1.623573596116343, -0.004362351125495, 0.000062483231580, 1123.000000000000000, 1.533246982980251, 0.001448589411428, -0.000048190368878, 1169.000000000000000, 1.490048351696662, -0.002888543787548, -0.000114652355502, 1209.000000000000000, 0.980415895956133, -0.013551212849244, -0.000197083543242, 1222.000000000000000, -0.010602683530416, -0.027741227962696, 0.000288427351109, 1221.000000000000000, -0.312347265162994, -0.022549535642734, 0.000078979187430, 1192.000000000000000, -1.482721477652483, -0.015204471211766, 0.000120031641829, 1135.000000000000000, -2.079347469388366, -0.004041528521650, 0.000074733324116, 1071.000000000000000, -2.120059205573765, 0.002684470648803, 0.000105470077516, 1011.000000000000000, -1.649551791868599, 0.012493187857815, 0.000120099432742, 976.000000000000000, -0.575692051997248, 0.023302136804564, 0.000426706839516, 973.000000000000000, 0.018362735948861, 0.036103341990047, -0.000573068920477];

    const maxDay = (Math.min(bull[bull.length - 1], darryl[darryl.length - 1]));
    day = (((day % maxDay) + maxDay) % maxDay);
    
    var i = 0;
    if (day > bull[0]){
        while (i < bull.length - 2 && day > bull[i + 1]){
            i++;
        }
    }
    var j = 0;
    if (day > darryl[0]){
        while (j < darryl.length - 2 && day > darryl[j + 1]){
            j++;
        }
    }
    const sunrise = BULL[i * 4] + BULL[i * 4 + 1] * (day - bull[i]) + BULL[i * 4 + 2] * (day - bull[i]) * (day - bull[i]) + BULL[i * 4 + 3] * (day - bull[i]) * (day - bull[i]) * (day - bull[i]);
    const sunset = DARRYL[j * 4] + DARRYL[j * 4 + 1] * (day - darryl[j]) + DARRYL[j * 4 + 2] * (day - darryl[j]) * (day - darryl[j]) + DARRYL[j * 4 + 3] * (day - darryl[j]) * (day - darryl[j]) * (day - darryl[j]);

    return (minute >= sunrise && minute <= sunset);
}
