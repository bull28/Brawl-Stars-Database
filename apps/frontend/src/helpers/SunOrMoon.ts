export default function isSun(){
    const date1 = new Date();
    const yearStart = new Date(date1.getFullYear(), 0, 1);
    const daylight = (yearStart.getTimezoneOffset() - date1.getTimezoneOffset());
    var day = Math.floor((date1.valueOf() - yearStart.valueOf() + daylight * 60000) / 86400000);
    var minute = (date1.getHours() * 60 + date1.getMinutes() - daylight + date1.getSeconds() / 60);

    const bull = [0, 10, 31, 59, 90, 120, 151, 166, 181, 212, 243, 273, 304, 334, 355, 365];
    const darryl = [0, 10, 31, 59, 90, 120, 151, 175, 181, 212, 243, 273, 304, 334, 344, 365];
    const BULL = [487.000000000000000, -0.238726614417160, 0.0, -0.000612733855828, 484.000000000000000, -0.422546771165680, -0.036764031349704, 0.000441250407051, 463.000000000000000, -1.382861799324859, -0.017930511410990, 0.000172086886266, 414.000000000000000, -1.982222081842554, -0.006950425929283, 0.000105006339336, 349.000000000000000, -2.110415213152272, 0.005630327257940, 0.000009080068979, 291.000000000000000, -1.748079391433646, 0.012895066932029, 0.000060363929132, 251.000000000000000, -0.774556033961097, 0.037017824682558, -0.000506865198269, 246.000000000000000, -0.006155302316173, 0.028417781520874, -0.000385680387394, 251.000000000000000, 0.586043881819231, 0.022124328176305, -0.000215798050211, 284.000000000000000, 1.335606449992852, 0.004110219013430, -0.000045440583454, 328.000000000000000, 1.459434826727008, -0.000231510495624, 0.000015752394232, 372.000000000000000, 1.488075661414689, 0.002372409970426, -0.000013770316050, 420.000000000000000, 1.595465258410007, 0.002183541155621, -0.000141820177495, 466.000000000000000, 1.343563248511363, -0.021160549637818, 0.000012630835929, 485.000000000000000, 0.471530759657161, -0.040729613948574, 0.001357653798286];
    const DARRYL = [984.000000000000000, 1.169543616956988, 0.0, 0.000304563830430, 996.000000000000000, 1.260912766086024, 0.018273829825807, -0.000274044600042, 1028.000000000000000, 1.665852612914578, 0.002018040046344, -0.000055849879644, 1075.000000000000000, 1.647503938587507, -0.005346699687478, 0.000069334909988, 1123.000000000000000, 1.515901103459385, 0.002202893882819, -0.000054060651790, 1169.000000000000000, 1.502110976596656, -0.005325129556487, -0.000048604973674, 1209.000000000000000, 1.031824804993263, -0.019690784216278, -0.000030519647805, 1222.000000000000000, 0.033929211204135, -0.043776397716539, 0.001723958567456, 1221.000000000000000, -0.305200036109037, -0.025490287004646, 0.000166404851494, 1192.000000000000000, -1.405852643541125, -0.020029271631488, 0.000195681984077, 1135.000000000000000, -2.083516324599692, -0.003661694224674, 0.000066704242230, 1071.000000000000000, -2.123116524060402, 0.004683375151967, 0.000044170679898, 1011.000000000000000, -1.705403194493400, 0.017582496764905, 0.000012512916533, 976.000000000000000, -0.616668513960342, 0.037417318505728, -0.000575046710969, 973.000000000000000, -0.040836157136594, 0.040331834353294, -0.000640187846878];

    const maxDay = (Math.min(bull[bull.length - 1], darryl[darryl.length - 1]));
    day = (((day % maxDay) + maxDay) % maxDay);
    
    var i = 0;
    if (day > bull[0]){
        while (i < bull.length - 2 && day > bull[i + 1]){
            i++;
        }
    }
    var j = 0;
    if (day > darryl[0]){
        while (j < darryl.length - 2 && day > darryl[j + 1]){
            j++;
        }
    }
    const sunrise = BULL[i * 4] + BULL[i * 4 + 1] * (day - bull[i]) + BULL[i * 4 + 2] * (day - bull[i]) * (day - bull[i]) + BULL[i * 4 + 3] * (day - bull[i]) * (day - bull[i]) * (day - bull[i]);
    const sunset = DARRYL[j * 4] + DARRYL[j * 4 + 1] * (day - darryl[j]) + DARRYL[j * 4 + 2] * (day - darryl[j]) * (day - darryl[j]) + DARRYL[j * 4 + 3] * (day - darryl[j]) * (day - darryl[j]) * (day - darryl[j]);

    return (minute >= sunrise && minute <= sunset);
}
